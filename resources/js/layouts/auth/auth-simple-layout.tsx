import { router } from '@inertiajs/react';
import { useEffect, useState, type PropsWithChildren } from 'react';

interface AuthLayoutProps {
  title?: string;
  step?: number;
}

type LeftContent = {
  key: 'technology' | 'design';
  title: string;
  description: string;
  image: string;
};

const LEFT_CONTENTS: LeftContent[] = [
  {
    key: 'technology',
    title: 'Technology',
    description:
      'Pelajari teknologi modern mulai dari pemrograman web, backend, hingga arsitektur sistem untuk membangun aplikasi yang scalable dan siap industri.',
    image: 'M21.2971 65.1481C19.836 64.7566 18.7089 63.9326 17.9158 62.6761C17.1226 61.4196 16.8053 60.0586 16.9636 58.5931L17.6686 53.0401C17.0376 52.581 16.4622 52.0789 15.9425 51.5336C15.4228 50.9884 14.9222 50.4192 14.4408 49.8263L8.84276 50.5882C7.33042 50.821 5.96308 50.5126 4.74074 49.6631C3.5184 48.8136 2.69519 47.665 2.27109 46.2174L0.239548 38.5392C-0.184549 37.0916 -0.0457598 35.7078 0.655912 34.3879C1.35758 33.0679 2.39986 32.1002 3.78274 31.4848L8.95474 29.3907C9.00212 28.9974 9.07308 28.6244 9.16762 28.2715L9.75486 26.0799C9.84882 25.7293 9.9736 25.3718 10.1292 25.0075L6.69717 20.608C5.80728 19.3836 5.38849 18.0244 5.4408 16.5304C5.49311 15.0365 6.06481 13.7687 7.15589 12.7271L12.7544 7.09334C13.8454 6.05173 15.1326 5.46866 16.616 5.34413C18.0993 5.2196 19.4376 5.6362 20.631 6.59394L25.0981 10.0528C25.8093 9.77943 26.5404 9.54032 27.2912 9.33552C28.0421 9.13072 28.7784 8.98004 29.5003 8.88347L31.6663 3.72198C32.2597 2.37302 33.2151 1.35304 34.5324 0.662035C35.8497 -0.0289748 37.2378 -0.179025 38.6967 0.211886L46.3267 2.25634C47.7877 2.64783 48.9159 3.47211 49.7112 4.72919C50.5065 5.98627 50.8228 7.34699 50.6601 8.81136L49.9552 14.3643C50.5862 14.8234 51.1626 15.3258 51.6845 15.8717C52.2064 16.4175 52.7059 16.9863 53.183 17.5782L58.781 16.8162C60.2933 16.5834 61.6607 16.8918 62.883 17.7413C64.1053 18.5909 64.9286 19.7394 65.3527 21.187L67.3842 28.8652C67.8083 30.3128 67.6695 31.6966 66.9678 33.0165C66.2662 34.3365 65.2239 35.3042 63.841 35.9196L58.669 38.0137C58.6216 38.407 58.5507 38.7801 58.4561 39.1329L57.8698 41.3212C57.7752 41.6741 57.6231 42.0254 57.4134 42.3752L60.8454 46.7747C61.7353 47.9991 62.1541 49.3583 62.1018 50.8522C62.0495 52.3462 61.4778 53.614 60.3867 54.6556L54.7071 60.2676C53.616 61.3092 52.3288 61.8923 50.8454 62.0168C49.3621 62.1413 48.0238 61.7247 46.8304 60.767L42.5257 57.3516C41.8145 57.625 41.0834 57.8641 40.3325 58.0689C39.5817 58.2737 38.8453 58.4244 38.1235 58.5209L35.9575 63.6824C35.364 65.0314 34.4097 66.0517 33.0946 66.7433C31.7795 67.4348 30.3903 67.5846 28.9271 67.1925L21.2971 65.1481ZM30.9293 45.1095C34.0679 45.9505 37.0437 45.5589 39.8569 43.9348C42.67 42.3106 44.4971 39.9292 45.338 36.7906C46.179 33.6521 45.7874 30.6762 44.1633 27.8631C42.5391 25.0499 40.1577 23.2229 37.0191 22.3819C33.8264 21.5264 30.8365 21.9142 28.0494 23.5453C25.2622 25.1765 23.4492 27.5616 22.6104 30.7008C21.7716 33.8399 22.1502 36.8123 23.7462 39.6179C25.3422 42.4235 27.7366 44.2541 30.9293 45.1095Z',
  },
  {
    key: 'design',
    title: 'Design',
    description:
      'Kuasai prinsip desain UI/UX, design system, dan visual thinking untuk menciptakan produk digital yang estetis dan mudah digunakan.',
    image: 'M4.8558 47.8341V59.1442H16.1659L49.5231 25.7568L38.213 14.4467L4.8558 47.8341ZM64 51.1819L51.1819 64L35.4986 48.3167L40.8369 42.9783L43.853 45.9943L51.3025 38.5146L55.5853 42.7974L51.1819 47.0801L54.3789 50.0961L58.6616 45.8737L64 51.1819ZM15.7436 28.4713L0 12.8181L12.8181 0L18.1263 5.33836L10.6767 12.8181L13.9039 16.0151L21.3233 8.53534L25.606 12.8181L21.3233 17.0707L24.3393 20.0867L15.7436 28.4713ZM58.2696 16.9199C59.4458 15.7436 59.4458 13.9039 58.2696 12.6673L51.2121 5.73044C50.0961 4.55419 48.1357 4.55419 46.9595 5.73044L41.41 11.2498L52.7201 22.5598L58.2696 16.9199Z',
  },
];

export default function AuthSimpleLayout({
  children,
  title,
  step = 0,
}: PropsWithChildren<AuthLayoutProps>) {
  const isFullPage = step > 2;

  const [activeIndex, setActiveIndex] = useState(0);

  useEffect(() => {
    const interval = setInterval(() => {
      setActiveIndex((prev) => (prev + 1) % LEFT_CONTENTS.length);
    }, 6000);

    return () => clearInterval(interval);
  }, []);

  const activeContent = LEFT_CONTENTS[activeIndex];

  return (
    <div className="min-h-screen flex flex-col">
      <div className="flex-1 flex items-center justify-center px-4 sm:px-6 md:px-12 py-8">
        {!isFullPage ? (
          <div className="relative bg-white dark:bg-[#222831] w-full max-w-4xl rounded-2xl shadow-sm overflow-hidden flex flex-col md:flex-row">
            <div className="absolute top-4 left-4 z-10">
              <svg
                width="48"
                height="27"
                viewBox="0 0 78 44"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                className="text-[#3ABEFF] cursor-pointer"
                onClick={() => router.get(route('home'))}
              >
                <path d="M32.8856 34.408C33.1416 34.888 33.2696 35.304 33.2696 35.656C33.3016 35.976 33.2056 36.28 32.9816 36.568C32.7576 36.824 32.4056 37.064 31.9256 37.288C31.1576 37.64 30.5496 37.72 30.1016 37.528C29.6856 37.336 29.3016 36.872 28.9496 36.136L16.9496 10.6L5.04556 36.088C4.69356 36.824 4.29356 37.288 3.84556 37.48C3.42956 37.672 2.82156 37.592 2.02156 37.24C1.54156 37.048 1.18956 36.808 0.965563 36.52C0.773563 36.232 0.693563 35.88 0.725563 35.464C0.789563 35.048 0.949563 34.568 1.20556 34.024L14.9816 5.272C15.1736 4.888 15.4456 4.584 15.7976 4.36C16.1816 4.104 16.5816 3.976 16.9976 3.976C17.2856 3.976 17.5576 4.024 17.8136 4.12C18.0696 4.216 18.2936 4.36 18.4856 4.552C18.6776 4.744 18.8376 5 18.9656 5.32L32.8856 34.408ZM7.92556 27.928L9.55756 24.232H24.4376L26.0216 27.928H7.92556Z" fill="#3ABEFF" />
                <path d="M28.7664 43.84C28.3504 43.84 27.9824 43.776 27.6624 43.648C27.3424 43.552 27.1024 43.36 26.9424 43.072C26.7504 42.784 26.6544 42.336 26.6544 41.728C26.6544 41.152 26.7504 40.72 26.9424 40.432C27.1024 40.144 27.3584 39.936 27.7104 39.808C28.0304 39.712 28.3984 39.664 28.8144 39.664C29.5504 39.664 30.2544 39.6 30.9264 39.472C31.6304 39.344 32.2384 39.088 32.7504 38.704C33.2944 38.32 33.7104 37.744 33.9984 36.976C34.3184 36.24 34.4784 35.28 34.4784 34.096V13.216C34.4784 12.8 34.5264 12.448 34.6224 12.16C34.7184 11.872 34.9104 11.648 35.1984 11.488C35.5184 11.296 35.9824 11.2 36.5904 11.2C37.1664 11.2 37.5984 11.296 37.8864 11.488C38.2064 11.648 38.4144 11.904 38.5104 12.256C38.6064 12.576 38.6544 12.96 38.6544 13.408V34.096C38.6544 35.76 38.3984 37.2 37.8864 38.416C37.3744 39.664 36.6704 40.688 35.7744 41.488C34.8784 42.288 33.8384 42.88 32.6544 43.264C31.4704 43.648 30.1744 43.84 28.7664 43.84ZM36.4944 5.44C35.5664 5.44 34.9264 5.264 34.5744 4.912C34.2544 4.528 34.0944 3.872 34.0944 2.944C34.0944 2.016 34.2704 1.392 34.6224 1.072C34.9744 0.719998 35.6144 0.543999 36.5424 0.543999C37.4704 0.543999 38.0944 0.735998 38.4144 1.12C38.7664 1.472 38.9424 2.112 38.9424 3.04C38.9424 3.936 38.7664 4.56 38.4144 4.912C38.0624 5.264 37.4224 5.44 36.4944 5.44Z" fill="#3ABEFF" />
                <path d="M64.886 37.48C64.278 37.48 63.814 37.384 63.494 37.192C63.206 37.032 63.014 36.792 62.918 36.472C62.854 36.12 62.822 35.72 62.822 35.272V16.36C62.822 15.88 62.87 15.48 62.966 15.16C63.062 14.84 63.254 14.616 63.542 14.488C63.83 14.328 64.294 14.248 64.934 14.248C65.51 14.248 65.942 14.328 66.23 14.488C66.55 14.616 66.758 14.824 66.854 15.112C66.982 15.368 67.046 15.672 67.046 16.024L66.854 17.464C67.078 17.048 67.334 16.632 67.622 16.216C67.942 15.8 68.326 15.432 68.774 15.112C69.254 14.76 69.814 14.472 70.454 14.248C71.126 14.024 71.942 13.912 72.902 13.912C73.382 13.912 73.83 13.96 74.246 14.056C74.694 14.12 75.11 14.232 75.494 14.392C75.91 14.552 76.262 14.744 76.55 14.968C76.838 15.16 77.062 15.384 77.222 15.64C77.414 15.864 77.51 16.136 77.51 16.456C77.51 17.16 77.286 17.768 76.838 18.28C76.39 18.76 75.926 19 75.446 19C75.03 19 74.726 18.952 74.534 18.856C74.342 18.728 74.15 18.6 73.958 18.472C73.798 18.344 73.558 18.232 73.238 18.136C72.918 18.008 72.406 17.944 71.702 17.944C71.222 17.944 70.71 18.04 70.166 18.232C69.654 18.424 69.158 18.712 68.678 19.096C68.198 19.448 67.798 19.912 67.478 20.488C67.19 21.064 67.046 21.736 67.046 22.504V35.368C67.046 35.816 66.998 36.2 66.902 36.52C66.806 36.84 66.598 37.08 66.278 37.24C65.99 37.4 65.526 37.48 64.886 37.48Z" fill="#42C2FF" />
                <path d="M60.0188 37.432C59.3148 37.432 58.8028 37.288 58.4828 37C58.1948 36.712 58.0188 36.264 57.9548 35.656L58.1468 33.256C57.8268 33.768 57.3308 34.36 56.6588 35.032C55.9868 35.672 55.1068 36.248 54.0188 36.76C52.9308 37.24 51.6028 37.48 50.0348 37.48C48.4988 37.48 47.0588 37.176 45.7148 36.568C44.4028 35.96 43.2348 35.112 42.2108 34.024C41.2188 32.936 40.4348 31.688 39.8588 30.28C39.3148 28.872 39.0428 27.368 39.0428 25.768C39.0428 24.2 39.3148 22.728 39.8588 21.352C40.4348 19.944 41.2348 18.712 42.2588 17.656C43.2828 16.6 44.4508 15.768 45.7628 15.16C47.1068 14.552 48.5308 14.248 50.0348 14.248C51.4428 14.248 52.6428 14.44 53.6348 14.824C54.6268 15.176 55.4748 15.656 56.1788 16.264C56.9148 16.84 57.5548 17.496 58.0988 18.232L58.0028 16.216C57.9708 15.512 58.1148 15.016 58.4348 14.728C58.7868 14.408 59.3308 14.248 60.0668 14.248C60.6748 14.248 61.1068 14.344 61.3628 14.536C61.6508 14.728 61.8428 15 61.9388 15.352C62.0348 15.704 62.0828 16.136 62.0828 16.648V35.176C62.0828 35.624 62.0348 36.024 61.9388 36.376C61.8428 36.728 61.6508 36.984 61.3628 37.144C61.0748 37.336 60.6268 37.432 60.0188 37.432ZM50.7548 33.448C52.0348 33.448 53.2028 33.112 54.2588 32.44C55.3468 31.768 56.1948 30.872 56.8028 29.752C57.4428 28.6 57.7628 27.288 57.7628 25.816C57.7628 24.312 57.4268 23 56.7548 21.88C56.1148 20.728 55.2508 19.832 54.1628 19.192C53.1068 18.52 51.9388 18.184 50.6588 18.184C49.1548 18.184 47.8428 18.536 46.7228 19.24C45.6348 19.912 44.7708 20.824 44.1308 21.976C43.4908 23.128 43.1708 24.44 43.1708 25.912C43.1708 27.352 43.4908 28.648 44.1308 29.8C44.7708 30.92 45.6508 31.816 46.7708 32.488C47.9228 33.128 49.2508 33.448 50.7548 33.448Z" fill="#3ABEFF" />
              </svg>
            </div>
            <div className="hidden md:flex lg:w-1/2 w-full flex-col items-center justify-center p-8 sm:p-10 text-center">
              <div className="text-[#3ABEFF] mb-4">
                <svg
                  width="64"
                  height="64"
                  viewBox="0 0 68 68"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d={activeContent.image}
                    fill="#3ABEFF"
                  />
                </svg>
              </div>

              <div
                key={activeContent.key}
                className="transition-opacity duration-700 ease-in-out"
              >
                <h2 className="text-2xl font-semibold text-[#3ABEFF] mb-3">
                  {activeContent.title}
                </h2>

                <p className="text-gray-600 dark:text-gray-300 text-sm leading-relaxed max-w-sm">
                  {activeContent.description}
                </p>
              </div>
            </div>

            <div className="lg:w-1/2 w-full flex flex-col justify-center px-6 sm:px-10 py-14">
              <h1 className="text-2xl lg:text-3xl font-semibold text-center text-gray-800 dark:text-white mb-8">
                {title}
              </h1>
              {children}
            </div>
          </div>
        ) : (
          <div className="bg-white dark:bg-[#222831] w-full max-w-4xl rounded-2xl shadow-sm px-6 sm:px-12 py-14">
            <h1 className="text-3xl font-semibold text-center text-gray-800 dark:text-white mb-8">
              {title}
            </h1>
            {children}
          </div>
        )}
      </div>
    </div>
  );
}
